
(function(){function A(a){a.target.h.closest(".mbr-slider").classList.contains("in")&&a.target.playVideo()}function p(a){if(a){var c=a!=document&&a.matches(".mbr-gallery");a=c&&a.id&&a.id.toLowerCase().includes("gallery");return c&&a?!0:!1}}function B(a,c){var b=Array.from(a.querySelectorAll(c));a.matches&&a.matches(c)&&b.splice(0,0,a);return b}function m(a){var c=a.target;p(a.target)&&"undefined"!==typeof Masonry&&B(c,".mbr-gallery").forEach(function(a){var c=a.querySelector(".mbr-gallery-row");
if(c)imagesLoaded(c).on("progress",function(a,b){var h=new Masonry(c,{itemSelector:".mbr-gallery-item:not(.mbr-gallery-item__hided)",percentPosition:!0,horizontalOrder:!0});h.reloadItems();c.addEventListener("filter",function(){h.reloadItems();h.layout();window.dispatchEvent(new CustomEvent("update.parallax"))}.bind(this,c));imagesLoaded(c).on("progress",function(){h.layout()})})})}function u(a,c,b,d,e){var g=a.querySelector("img");g.complete&&50<g.naturalWidth&&50<g.naturalHeight?v(g,a,c,b,d,e):
g.addEventListener("load",function(){v(g,a,c,b,d,e)},{once:!0})}function v(a,c,b,d,e,g){var h=a.naturalWidth,q=a.naturalHeight;d=d/b>h/q?(b-2*g)*h/q:d-2*g;d=d>=h?h:d;b=(b-d*q/h)/2;a.style.width=parseInt(d)+"px";a.style.height=d*q/h+"px";c.style.top=b+e+"px";"flex"==getComputedStyle(c.parentElement,null).display&&(c.parentElement.style.display="block")}function C(a,c,b,d,e,g){a.querySelector(".modal-dialog").querySelectorAll(".carousel-item").forEach(function(a){if(!g&&!a.classList.contains("carousel-item-next")&&
!a.classList.contains("carousel-item-prev")||g&&!a.classList.contains("active"))a.classList.contains("video-container")?(a.style.top=d+"px",a.style.height=b-2*d-2*e+"px"):u(a,b,c,d,e)})}function t(){var a=window.innerWidth-0,c=window.innerHeight-0;if(l){var b,d=!1;l.querySelector(".modal-dialog").querySelector(".carousel-item.carousel-item-next")?b=l.querySelector(".modal-dialog").querySelector(".carousel-item.carousel-item-next"):(b=l.querySelector(".modal-dialog").querySelector(".carousel-item.active"),
d=!0);b.classList.contains("video-container")?(b.style.top="0px",b.style.height=c-0-20+"px"):u(b,c,a,0,10);clearTimeout(w);w=setTimeout(C,200,l,a,c,0,10,d)}}var f,k="function"==typeof jQuery;k&&(f=jQuery);var r;k?r=f("html").hasClass("is-builder"):r=document.querySelector("html").classList.contains("is-builder");if(!r){var x=document.createElement("script");x.src="https://www.youtube.com/iframe_api";var y=document.getElementsByTagName("script")[0];y.parentNode.insertBefore(x,y);var n=[];document.querySelectorAll(".carousel-item.video-container > img").forEach(function(a){return a.style.display=
"none"});window.onYouTubeIframeAPIReady=function(){var a=a||{};a.YTAPIReady||(a.YTAPIReady=!0,document.dispatchEvent(new CustomEvent("YTAPIReady")));document.querySelectorAll(".video-slide").forEach(function(a,b){var d=document.createElement("div");d.setAttribute("id","mbr-video-"+b);d.setAttribute("data-video-num",b);d.classList.add("mbr-background-video");var e=document.createElement("div");d.classList.add("item-overlay");document.querySelectorAll(".video-container")[b].appendChild(d).appendChild(e);
a.setAttribute("data-video-num",b);-1!==a.getAttribute("data-video-url").indexOf("vimeo.com")?(d={id:a.getAttribute("data-video-url"),width:"100%",height:"100%",loop:!0},d=new Vimeo.Player("mbr-video-"+b,d),d.playVideo=Vimeo.play):(d=YT.Player,e=a.getAttribute("data-video-url"),e="false"===e?!1:(e=/(?:\?v=|\/embed\/|\.be\/)([-a-z0-9_]+)/i.exec(e)||/^([-a-z0-9_]+)$/i.exec(e))?e[1]:!1,d=new d("mbr-video-"+b,{height:"100%",width:"100%",videoId:e,events:{onReady:A},playerVars:{rel:0}}));n.push(d)})}}if(k)f(document).on("add.cards",
function(a){var c=f(a.target);p(a.target)&&(c.on("click",".mbr-gallery-filter li",function(a){a.preventDefault();var d=f(this).closest("li");d.parent().find("li").removeClass("active");d.addClass("active");a=d.closest("section").find(".mbr-gallery-row");var e=f(this)[0].textContent.trim();c.find(".mbr-gallery-item").each(function(a,c){var b=f(this),k=b.attr("data-tags").split(",").map(function(a){return a.trim()});-1!==f.inArray(e,k)||d.hasClass("mbr-gallery-filter-all")?b.removeClass("mbr-gallery-item__hided"):
b.addClass("mbr-gallery-item__hided")});a.closest(".mbr-gallery-row")[0].dispatchEvent(new CustomEvent("filter"))}),(a=a.target.querySelector(".modal"))&&a.addEventListener("show.bs.modal",function(a){return a.preventDefault()}))});if(r)f(document).on("changeButtonColor.cards",function(a){var c=f(a.target);if(0<c.find(".mbr-gallery-filter").length&&f(a.target).find(".mbr-gallery-filter").hasClass("gallery-filter-active")){var b=(c.find(".mbr-gallery-filter .mbr-gallery-filter-all").find("a").attr("class")||
"").replace(/(^|\s)active(\s|$)/," ").trim();c.find(".mbr-gallery-filter ul li:not(.mbr-gallery-filter-all) a").attr("class",b)}m(a)});if(k)f(document).on("add.cards changeParameter.cards",function(a){var c=f(a.target),b=[];if(p(a.target)){c.find(".mbr-gallery-item").each(function(a){(f(this).attr("data-tags")||"").trim().split(",").map(function(a){a=a.trim();-1===f.inArray(a,b)&&b.push(a)})});if(0<c.find(".mbr-gallery-filter").length&&f(a.target).find(".mbr-gallery-filter").hasClass("gallery-filter-active")){var d=
"";c.find(".mbr-gallery-filter ul li:not(.mbr-gallery-filter-all)").remove();var e=c.find(".mbr-gallery-filter .mbr-gallery-filter-all").clone();e.find("a").removeClass("active");b.map(function(a){e.find("a").length?e.find("a").text(a):e.text(a);d+="<li>"+e.html()+"</li>"});c.find(".mbr-gallery-filter ul").append(d)}m(a)}});if(k)f(document).on("change.cards",function(a){m(a)});if(k)f(document).on("lazyload",function(a){m(a);f(window).scrollEnd(function(){m(a)},250)});document.addEventListener("DOMContentLoaded",
function(a){m(a)});document.querySelectorAll(".mbr-gallery-item").forEach(function(a){return a.addEventListener("click",function(a){return a.stopPropagation()})});var z,w,l,D=function(a){var c=a.querySelector(".mbr-gallery-filter-all"),b=[];if(a&&p(a))if(a.querySelectorAll(".mbr-gallery-item").forEach(function(a){(a.getAttribute("data-tags")||"").trim().split(",").map(function(a){a=a.trim();-1==b.indexOf(a)&&b.push(a)})}),0<a.querySelectorAll(".mbr-gallery-filter").length&&a.querySelector(".mbr-gallery-filter").classList.contains("gallery-filter-active")){var d=
[];a.querySelectorAll(".mbr-gallery-filter > ul > li").forEach(function(a,c){0!=c&&a.removeChild(a.firstChild)});b.map(function(a){var c=document.createElement("li"),b=document.createElement("a");b.classList.add("btn");b.classList.add("btn-md");b.classList.add("btn-primary-outline");b.classList.add("display-7");b.innerText=a;c.appendChild(b);d.push(c)});var e=a.querySelector(".mbr-gallery-filter > ul");e.appendChild(c);d.forEach(function(a){return e.appendChild(a)});a.querySelectorAll(".mbr-gallery-filter > ul > li").forEach(function(c){c.addEventListener("click",
function(b){b.preventDefault();var d=c.closest("li");d.parentElement.querySelectorAll("li").forEach(function(a){return a.classList.remove("active")});d.classList.add("active");b=d.closest("section").querySelector(".mbr-gallery-row");var e=d.querySelector("a").innerHTML.trim();a.querySelectorAll(".mbr-gallery-item").forEach(function(a){-1!=a.getAttribute("data-tags").split(",").map(function(a){return a.trim()}).indexOf(e)||d.classList.contains("mbr-gallery-filter-all")?a.classList.remove("mbr-gallery-item__hided"):
a.classList.add("mbr-gallery-item__hided")});b.closest(".mbr-gallery-row").dispatchEvent(new CustomEvent("filter"))})})}else a.querySelector(".mbr-gallery-item__hided").classList.remove("mbr-gallery-item__hided"),a.querySelector(".mbr-gallery-row").dispatchEvent(new CustomEvent("filter"))},k=document.querySelectorAll(".mbr-gallery");k.length&&k.forEach(function(a){a.querySelector(".mbr-gallery-filter")&&D(a);a.addEventListener("show.bs.modal",function(a){clearTimeout(z);z=setTimeout(function(){var b=
a.relatedTarget.parentElement.getAttribute("data-video-num");(b=a.target.querySelector(".carousel-item").querySelector('.mbr-background-video[data-video-num="'+b+'"]'))&&b.closest(".carousel-item").classList.contains("active")&&(b=n[+b.getAttribute("data-video-num")],b.playVideo?b.playVideo():b.play())},500);l=a.target;t()});a.addEventListener("slide.bs.carousel",function(a){if(a=a.target.querySelector(".carousel-item.active > .mbr-background-video"))a=n[+a.getAttribute("data-video-num")],a.pauseVideo?
a.pauseVideo():a.pause()});a.addEventListener("slid.bs.carousel",function(a){if(a=a.target.querySelector(".carousel-item.active").querySelector(".mbr-background-video"))a=n[+a.getAttribute("data-video-num")],a.playVideo?a.playVideo():a.play()});a.addEventListener("hide.bs.modal",function(a){n.map(function(a){a.pauseVideo?a.pauseVideo():a.pause()});l=null})});window.addEventListener("resize",t);window.addEventListener("load",t)})();
